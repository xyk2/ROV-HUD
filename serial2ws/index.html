<html style='background-color:black;-webkit-user-select:none;'>
	<head>
		<title>ROV HUD</title>
			<script src="./js/jquery.min.js"></script>
			<script src="./js/autobahn.min.js"></script>
			<link rel="stylesheet" type="text/css" href="./style.css" />
			<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>
			<script src="./js/jquery.csv-0.71.min.js" type="text/javascript"></script>

			<script>
				$(document).ready(function() {
				});
				var sess = null; var wsuri = "ws://" + window.location.hostname + ":9000"; var retryCount = 0; var retryDelay = 2;

				function connect() {
					statusline = document.getElementById('statusline');
					sess = new ab.Session(wsuri,
						function() {
							statusline.innerHTML = "Connected to " + wsuri;
							console.log("Connected to " + wsuri);
							retryCount = 0;
							sess.prefix("event", "http://example.com/mcu#");
							sess.subscribe("event:analog-value", onAnalogValue);
							sess.prefix("rpc", "http://example.com/mcu-control#");
						},
						function() {
							console.log(retryCount);
							retryCount = retryCount + 1;
							statusline.innerHTML = "Connection lost. Reconnecting (" + retryCount + ") in " + retryDelay + " secs ..";
							window.setTimeout(connect, retryDelay * 1000);
						}
					);
				}

				window.onload = function () {
					connect();
				};
				
				Array.prototype.clean = function(deleteValue) {
				  for (var i = 0; i < this.length; i++) {
					if (this[i] == deleteValue) {         
					  this.splice(i, 1);
					  i--;
					}
				  }
				  return this;
				};
				
				
				function onAnalogValue(topicUri, data) {
					console.log(data);
					
					
				}
			</script>
			
			<script>
				function zeroFill( number, width ) {
				  width -= number.toString().length;
				  if ( width > 0 ) return new Array( width + (/\./.test( number ) ? 2 : 1) ).join( '0' ) + number;
				  return number + ""; // always return a string
				}
				
				function return_formatted_time() {
					var monthNames = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC" ];
					var date_obj = new Date();
					date = date_obj.getFullYear().toString() + "-" + monthNames[date_obj.getMonth()].toString() + "-" + date_obj.getDate().toString();
					time = date_obj.getHours().toString() + ":" + date_obj.getMinutes().toString() + ":" + zeroFill(date_obj.getSeconds(),2);
					$('#date').html(date + " " + time);
				}
				
				$(document).ready(function() {
					return_formatted_time();			
					setInterval(function(){return_formatted_time()}, 1000);
				});
			</script>
			
   </head>
	<body style='background:url(sample_background.jpg);'>
		<div id="statusline" style='display:none;'></div>
		<p class='data'>DEPTH: <span id='depth'>12.3</span>M</p>
		<p class='data'>ROLL: <span id='roll'>50</span>°</p>
		<p class='data'>PITCH: <span id='pitch'>50</span>°</p>
		<p class='data'>YAW: <span id='yaw'>50</span>°</p>
		
		
		<p class='data' id='date'>2013-MAR-24 13:52:01</p>
		<p class='data' id='mission_time'>MISSION TIME: <span>3:45</span></p>
		
		


   </body>
 </html>
